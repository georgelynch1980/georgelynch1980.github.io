<! <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en">

    <HEAD>
        <TITLE>Live region with aria</TITLE>
        <META NAME="Generator" CONTENT="TextPad 4.6">
        <script>
            var myVar = setInterval(function () { myTimer() }, 1000);

            function myTimer() {
                var d = new Date();
                var t = d.toLocaleTimeString();
                document.getElementById("clock").innerHTML = t;

            }

            function runAlert() {

                document.getElementById("myAlert").innerHTML = "Get back to work";
            }

            function setAlert() {
                var x = document.getElementById("alertSelect").value;
                document.getElementById("myAlert").setAttribute("aria-hidden", "false");
                document.getElementById("myAlert").innerHTML = "relax for";
                document.getElementById("myAlert").innerHTML += x;
                document.getElementById("myAlert").innerHTML += " millisecs. ";


                var int = self.setTimeout(function () { runAlert() }, x);
            }

            function setRudeAlert() {
                var x = document.getElementById("alertSelect").value;
                document.getElementById("myRudeAlert").setAttribute("aria-hidden", "false");
                document.getElementById("myRudeAlert").innerHTML = "relax for";
                document.getElementById("myRudeAlert").innerHTML += x;
                document.getElementById("myRudeAlert").innerHTML += " millisecs. ";


                int = setInterval(function () { runRudeAlert() }, x);
            }

            function runRudeAlert() {

                document.getElementById("myRudeAlert").innerHTML += "Get back to work RIGHT NOW. </br>";
            }

            function stopAlert() {

                document.getElementById("myRudeAlert").innerHTML = "Ok. I will stop bugging you now. </br>";
                clearTimeout(int);
            }

            function atomicTrue() {
                document.getElementById("myRudeAlert").setAttribute("aria-atomic", "true");
            }
            function relevantAll() {
                document.getElementById("myRudeAlert").setAttribute("aria-relevant", "all");
            }
            function liveAssertive() {
                document.getElementById("clock").setAttribute("aria-live", "assertive");
            }
        </script>




    </head>
    </script>
    <style type="text/css">
        div.alerts {
            border: groove;

            width: 15%;
            height: width:30%;
            position: absolute;
            top: 10px;
            right: 30%;

        }

        .rude {
            color: red;
            border: groove;
            width: 15%;
            height: width:30%;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .notes {
            border: dashed #009
        }

        button {
            padding: 1px;
            margin: 5px;
            white-space: nowrap;
        }

        div[aria-hidden="true"] {
            display: none;
        }

        div[aria-hidden="false"] {
            display: block;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="http://accessibility.athena-ict.com/accessibility.css" />
    </HEAD>

    <BODY>

        <section id="expirationWarning" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="dialog1Title"
            aria-describedby="dialog1Desc" tabindex="-1">
            <h1 id="dialog1Title">標題内容</h1>
            <p id="dialog1Desc" aria-hidden="true" aria-atomic=" true" aria-live="rude" aria-relevant="additions">
                您的訊息已經送出。</p>
            <button class="close_btn">關閉</button>
        </section>

        <button class="btn">show</button>

        <script src="https://code.jquery.com/jquery-3.6.1.slim.min.js"
            integrity="sha256-w8CvhFs7iHNVUtnSP0YKEg00p9Ih13rlL9zGqvLdePA=" crossorigin="anonymous"></script>

        <script>
            $(".close_btn").click(function(){
                $("#expirationWarning").hide();
            });

            $(".btn").click(function () {
                $("#expirationWarning").show();
                var div = document.getElementById("dialog1Desc");
                $("#dialog1Desc").text("a" + Math.random() * 999999)
                $("#dialog1Desc").attr("aria-hidden", "false")
                $("#dialog1Desc").attr('tabindex', -1);
                $("#dialog1Desc").focus();
            });

        </script>




        <h1>ARIA live regions example</h1>
        <div>
            <p>Author Lisa Seeman </p>
        </div>
        <p>The content below uses aria-live, aria-atomic and aria-relevant
            <script>
                var myVar = setInterval(function () { myTimer() }, 1000);
            </script>.
        </p>
        <p>The time is now:</p>
        <p id="clock" aria-live="off"></p>
        <fieldset aria-controls="alerts">
            <legend>Taking a brake...</legend>
            <p>
                <label id="setAlertLabel" for="alertSelect">Alert me in:</label>
                <select id="alertSelect" role="listbox">
                    <option id="interval1" value="10000">10 seconds
                    </option>
                    <option id="interval1" value="60000">1 minute
                    </option>
                    <option id="interval2" value="300000" selected>5 minutes
                    </option>
                    <option id="interval3" value="600000">10 minutes
                    </option>
                </select>
            </p>
            <p>

                <button onClick="setAlert()">set alert</button> <button onClick="setRudeAlert()">set rude alert</button>
                <button onClick="stopAlert()">stop rude alert</button>
        </fieldset>
        </p>
        <div class="alerts" aria-hidden="true" id="myAlert" aria-live="polite">
            relax</div>
        <div class="rude" aria-hidden="true" id="myRudeAlert" aria-live="rude" aria-atomic="false"
            aria-relevant="additions">
            relax</div>
        <div class="notes">
            <h2>Notes:</h2>
            <ol>
                <li>
                    The clock has aria-live=&quot;off &quot;- We do not want it to bother users just because the clock
                    changed.</li>
                <li>The normal alert has aria-live=&quot;polite&quot; - We want to interrupt people at the next
                    convenient point.</li>
                <li>The rude alert is set to aria-live=&quot;assertive&quot; - We want to interrupt people right now
                </li>
                <li>The rude alerts will bug the user every x seconds...ongoing</li>
                <li>However every time we bug them we only want to say the new alert text
                    so...aria-atomic=&quot;false&quot; (only read new content)</li>
                <li>When we clear the rude alert, we do not want to hear all the alert messages that were deleted so
                    aria-relevant=&quot;additions &quot;. Note this is the default, so we did not really have to set it,
                    but it shows the point. </li>
            </ol>



        </div>

        <div class="mess">
            <h3> Mess around with setting</h3>
            <fieldset>
                <legend>
                    Hate your users? If you want to see the affect of different settings on your screen reader try the
                    following..... (at your own risk)</legend>
                <button onClick="liveAssertive()">set clock to aria-live as assertive</button>
                <h2> How we made the live region (tutorial)</h2>
                <p>To make an aria live region we just needed to set </p>
                <p dir="ltr">Assistive technologies need to let the user know when content has changed. �� The aria-live
                    attribute �犲ndicates that an element will be updated, and describes the types of updates.</p>
                <p dir="ltr">&nbsp;</p>
                <br />
                <div dir="ltr">
                    <table>
                        <colgroup>
                        </colgroup>
                        <tbody>
                            <tr>
                                <th>
                                    <p dir="ltr">Value</p>
                                </th>
                                <th>
                                    <p dir="ltr">Description</p>
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    <p dir="ltr">off (default):</p>
                                </td>
                                <td>
                                    <p dir="ltr">Updates to the region will not be presented to the user unless the
                                        assistive technology is currently focused on that region.</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p dir="ltr">polite:</p>
                                </td>
                                <td>
                                    <p dir="ltr">(Background change) Assistive technologies should announce updates at
                                        the next graceful opportunity, such as at the end of speaking the current
                                        sentence.</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p dir="ltr">assertive:</p>
                                </td>
                                <td>
                                    <p dir="ltr">This information has the highest priority and assistive technologies
                                        �坟hould notify the user immediately. Because an interruption may disorient users
                                        or cause them to not complete their current task, authors �坟hould NOT �抦se the
                                        assertive value unless the interruption is imperative.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>&nbsp;</p>
                <p>&nbsp;</p>
            </fieldset>


    </body>

    </html>
